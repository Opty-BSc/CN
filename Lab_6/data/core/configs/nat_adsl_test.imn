node n1 {
    type router
    model router
    network-config {
	hostname n1
	!
	interface eth1
	 ip address 192.168.0.1/24
	!
	interface eth0
	 ip address 10.0.0.101/24
	!
    }
    canvas c1
    iconcoords {272.0 112.0}
    labelcoords {238.0 118.0}
    interface-peer {eth0 n2}
    interface-peer {eth1 n4}
    custom-config {
	custom-config-id service:SimpleNAT
	custom-command SimpleNAT
	config {
	files=('confnat.sh', )
	}
    }
    custom-config {
	custom-config-id service:SimpleNAT:confnat.sh
	custom-command confnat.sh
	config {
	#!/bin/sh
	# auto-generated by SimpleNAT (simplenat.py)
	iptables -t nat -A POSTROUTING -s 192.168.0.0/24 -o eth0 -j SNAT --to  10.0.0.101
	#iptables -t nat -A POSTROUTING -s 192.168.0.0/24 -o eth0 -j SNAT --to  192.168.0.1
	
	}
    }
    custom-config {
	custom-config-id service:UserDefined
	custom-command UserDefined
	config {
	dirs=
	files=('nat.sh', )
	startidx=10
	cmdup=('sh nat.sh', )
	cmddown=
	cmdval=
	meta=inserts a NAT rule
	starttime=
	}
    }
    custom-config {
	custom-config-id service:UserDefined:nat.sh
	custom-command nat.sh
	config {
	#!/bin/sh
	
	iptables -t nat -A POSTROUTING -s 192.168.0.0/24 -o eth0 -j SNAT --to 10.0.0.101
	}
    }
    custom-config {
	custom-config-id service:DefaultRoute
	custom-command DefaultRoute
	config {
	files=('defaultroute.sh', )
	}
    }
    custom-config {
	custom-config-id service:DefaultRoute:defaultroute.sh
	custom-command defaultroute.sh
	config {
	#!/bin/sh
	# auto-generated by DefaultRoute service (utility.py)
	ip route add default via 10.0.0.1
	
	}
    }
    services {IPForward DefaultRoute SimpleNAT L_u128k}
    custom-image /usr/share/core/icons/normal/router_yellow.gif
}

node n2 {
    type router
    model router
    network-config {
	hostname n2
	!
	interface eth0
	 ipv6 address 2001:0::2/64
	 ip address 10.0.0.1/24
	!
	interface eth1
	 ip address 10.0.1.1/24
	 ipv6 address 2001:1::1/64
	!
    }
    canvas c1
    iconcoords {610.0 113.0}
    labelcoords {649.0 116.0}
    interface-peer {eth0 n1}
    interface-peer {eth1 n3}
    services {zebra OSPFv2 OSPFv3 vtysh IPForward TrafficDump}
}

node n3 {
    type router
    model router
    network-config {
	hostname n3
	!
	interface eth0
	 ip address 10.0.1.2/24
	 ipv6 address 2001:1::2/64
	!
    }
    canvas c1
    iconcoords {792.0 261.0}
    labelcoords {798.0 292.0}
    interface-peer {eth0 n2}
}

node n4 {
    type lanswitch
    network-config {
	hostname n4
	!
    }
    canvas c1
    iconcoords {192.0 223.0}
    labelcoords {192.0  247.0}
    interface-peer {e0 n1}
    interface-peer {e1 n5}
    interface-peer {e2 n6}
    interface-peer {e3 n7}
}

node n5 {
    type router
    model PC
    network-config {
	hostname n5
	!
	interface eth0
	 ip address 192.168.0.20/24
	 ipv6 address 2001:2::20/64
	!
    }
    canvas c1
    iconcoords {69.0 120.0}
    labelcoords {53.0 152.0}
    interface-peer {eth0 n4}
}

node n6 {
    type router
    model PC
    network-config {
	hostname n6
	!
	interface eth0
	 ip address 192.168.0.21/24
	 ipv6 address 2001:2::21/64
	!
    }
    canvas c1
    iconcoords {52.0 197.0}
    labelcoords {45.0 233.0}
    interface-peer {eth0 n4}
}

node n7 {
    type router
    model PC
    network-config {
	hostname n7
	!
	interface eth0
	 ip address 192.168.0.22/24
	 ipv6 address 2001:2::22/64
	!
    }
    canvas c1
    iconcoords {62.0 318.0}
    labelcoords {59.0 355.0}
    interface-peer {eth0 n4}
}

link l1 {
    color Magenta
    delay 50000
    nodes {n1 n2}
    bandwidth 1024000
}

link l2 {
    nodes {n2 n3}
    bandwidth 0
}

link l3 {
    nodes {n1 n4}
    bandwidth 0
}

link l4 {
    nodes {n4 n5}
    bandwidth 0
}

link l5 {
    nodes {n4 n6}
    bandwidth 0
}

link l6 {
    nodes {n4 n7}
    bandwidth 0
}

annotation a1 {
    iconcoords {229.0 79.0}
    type text
    label {NAT router}
    labelcolor black
    fontfamily {Arial}
    fontsize {12}
    effects {italic}
    canvas c1
}

annotation a2 {
    iconcoords {386.0 66.0}
    type text
    label {asymmetric link}
    labelcolor black
    fontfamily {Arial}
    fontsize {12}
    effects {italic}
    canvas c1
}

annotation a3 {
    iconcoords {10 19 362 384}
    type rectangle
    label {Home Network}
    labelcolor black
    fontfamily {Arial}
    fontsize {12}
    color #eeeefe
    width 0
    border black
    rad 25
    effects {bold}
    canvas c1
}

annotation a4 {
    iconcoords {460.0 81.0}
    type text
    label {}
    labelcolor black
    fontfamily {Arial}
    fontsize {12}
    canvas c1
}

annotation a5 {
    iconcoords {363.0 82.0}
    type text
    label {DOWN 1 Mb/s - UP 128 kb/s}
    labelcolor black
    fontfamily {Arial}
    fontsize 10
    canvas c1
}

annotation a6 {
    type text
    iconcoords {552.0 89.0}
    label {}
    canvas c1
}

annotation a7 {
    type text
    iconcoords {524.0 79.0}
    label {}
    canvas c1
}

canvas c1 {
    name {Canvas1}
}

option global {
    interface_names no
    ip_addresses yes
    ipv6_addresses no
    node_labels yes
    link_labels yes
    ipsec_configs yes
    exec_errors yes
    show_api no
    background_images no
    annotations yes
    grid yes
    traffic_start 0
}

option session {
}

